<div style="display: flex; align-items: center; gap: 10px;">
  <img src="{{student.imageStudent}}" alt="Avatar" width="60" height="60" style="border-radius: 50%;">
  <h1>Ch√†o m·ª´ng, {{user.fullname}}!</h1>
</div>

<hr>

<h2>üìö B√†i Blog M·ªõi Nh·∫•t</h2>
<ul style="list-style: none; padding: 0;">
  {{#each blogs}}
  <li style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px;">
    <div style="display: flex; align-items: center; gap: 10px;">
      <img src="{{this.author.image}}" alt="avatar" width="40" height="40" style="border-radius: 50%;">
      <div>
        <strong>{{this.title}}</strong><br>
        <small>B·ªüi {{this.author.fullname}} - {{this.createdAt}}</small>
      </div>
    </div>
    <p style="margin-top: 10px;">{{this.content}}</p>
    <p>‚ù§Ô∏è {{this.likes}} like | üí¨ {{this.comments.length}} b√¨nh lu·∫≠n</p>
  </li>
  {{/each}}
</ul>
<br>
<br>
<h3>üìä Th·ªëng k√™ Blog th√°ng n√†y</h3>
<ul>
  <li><strong>S·ªë blog:</strong> {{totalBlogsThisMonth}}</li>
  <li><strong>S·ªë l∆∞·ª£t th√≠ch:</strong> {{totalLikesThisMonth}}</li>
  <li><strong>S·ªë b√¨nh lu·∫≠n:</strong> {{totalCommentsThisMonth}}</li>
</ul>

<canvas id="monthlyBlogChart" width="400" height="200"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('monthlyBlogChart').getContext('2d');
  const blogChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Blog', 'Like', 'Comment'],
      datasets: [{
        label: 'Th·ªëng k√™ th√°ng n√†y',
        data: [{{ totalBlogsThisMonth }}, {{ totalLikesThisMonth }}, {{ totalCommentsThisMonth }}],
  backgroundColor: [
    'rgba(75, 192, 192, 0.6)',
    'rgba(255, 206, 86, 0.6)',
    'rgba(255, 99, 132, 0.6)'
  ],
    borderColor: [
      'rgba(75, 192, 192, 1)',
      'rgba(255, 206, 86, 1)',
      'rgba(255, 99, 132, 1)'
    ],
      borderWidth: 1
      }]
    },
  options: {
    responsive: true,
      scales: {
      y: {
        beginAtZero: true,
          precision: 0
      }
    }
  }
  });
</script>


<br>
<hr>

<h2>‚úâÔ∏è Tin nh·∫Øn g·∫ßn ƒë√¢y</h2>
<ul style="list-style: none; padding: 0;">
  {{#each messages}}
  <li style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 8px;">
    <div style="display: flex; align-items: center; gap: 10px;">
      <img src="{{this.sender.image}}" alt="avatar" width="40" height="40" style="border-radius: 50%;">
      <div>
        <strong>T·ª´: {{this.sender.fullname}}</strong><br>
        <small>{{this.createdAt}}</small>
      </div>
    </div>
    <p style="margin-top: 10px;">{{this.content}}</p>
  </li>
  {{/each}}
</ul>


<br>
<br>


<br>
<br>

<h2>L·ªõp h·ªçc c·ªßa b·∫°n</h2>

{{#if error}}
<p>{{error}}</p>
{{else}}
<ul>
  {{#each classes}}
  <li>
    <strong>{{this.classname}}</strong><br>
    Gi·∫£ng vi√™n: {{this.tutor.name}}<br>
    Ng√†y t·∫°o: {{this.formatCreateDate}}<br>
    <strong>Sinh vi√™n tham gia:</strong>
    <ul>
      {{#each this.student}}
      <li>{{this.name}}</li>
      {{/each}}
    </ul>
  </li>
  {{/each}}
</ul>
{{/if}}
<br>
<br>
<h3>üìä T√¨nh tr·∫°ng ƒëi·ªÉm danh theo l·ªõp h·ªçc</h3>

{{#if attendanceStats.length}}
{{#each attendanceStats}}
<div style="margin-bottom: 40px;">
  <h4>üßë‚Äçüè´ L·ªõp h·ªçc: {{this.className}}</h4>
  <canvas id="attendanceChart{{@index}}" width="300" height="300"></canvas>
</div>
{{/each}}
{{else}}
<p>Kh√¥ng c√≥ d·ªØ li·ªáu ƒëi·ªÉm danh.</p>
{{/if}}

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Script render bi·ªÉu ƒë·ªì -->
<script>
  const attendanceStats = {{{ json attendanceStats }}};

  attendanceStats.forEach((stat, index) => {
    const ctx = document.getElementById(`attendanceChart${index}`).getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['C√≥ m·∫∑t', 'V·∫Øng m·∫∑t'],
        datasets: [{
          data: [stat.present, stat.absent],
          backgroundColor: ['#4CAF50', '#F44336'],
          borderColor: ['#ffffff', '#ffffff'],
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom',
            labels: {
              color: '#333',
              font: {
                size: 14
              }
            }
          },
          title: {
            display: false
          }
        }
      }
    });
  });
</script>

<br>
<br><br>
<h3>üìÖ Danh s√°ch Cu·ªôc h·ªçp</h3>

{{#if meetings.length}}
<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Tr·∫°ng th√°i</th>
      <th>Gi·∫£ng vi√™n</th>
      <th>Sinh vi√™n</th>
      <th>B·∫Øt ƒë·∫ßu</th>
      <th>K·∫øt th√∫c</th>
      <th>Ghi ch√∫</th>
    </tr>
  </thead>
  <tbody>
    {{#each meetings}}
    <tr>
      <td>{{this.status}}</td>
      <td>
        {{#each this.tutor}}
        {{this.name}}<br>
        {{/each}}
      </td>
      <td>
        {{#each this.student}}
        {{this.name}}<br>
        {{/each}}
      </td>
      <td>{{formatDate this.startTime}}</td>
      <td>{{formatDate this.endTime}}</td>
      <td>{{this.note}}</td>
    </tr>
    {{/each}}
  </tbody>
</table>
{{else}}
<p>Kh√¥ng c√≥ cu·ªôc h·ªçp n√†o.</p>
{{/if}}



<br>
<br>